<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>SRM Insider Community - Application</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .g-recaptcha {
        filter: invert(1) hue-rotate(180deg) !important;
        -webkit-filter: invert(1) hue-rotate(180deg) !important;
        margin-bottom: 0.5rem;
      }
      .grecaptcha-badge {
        filter: invert(1) hue-rotate(180deg) !important;
      }
      
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #23262F;
      }
      ::-webkit-scrollbar-thumb {
        background: #45B4FF;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #1e90ff;
      }
    </style>
  </head>
  <body class="bg-black min-h-screen flex items-center justify-center p-4">
    <div
      id="loader-overlay"
      class="fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-70 hidden"
    >
      <div class="flex flex-col items-center">
        <svg
          class="animate-spin h-12 w-12 text-[#45B4FF] mb-4"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
        >
          <circle
            class="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="#45B4FF"
            stroke-width="4"
          ></circle>
          <path
            class="opacity-75"
            fill="#45B4FF"
            d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"
          ></path>
        </svg>
        <span class="text-[#45B4FF] font-semibold">Submitting Application...</span>
      </div>
    </div>

    <div
      id="success-modal"
      class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 hidden"
    >
      <div
        class="bg-[#181A20] rounded-2xl shadow-2xl p-8 max-w-sm w-full border border-[#23262F] text-center"
      >
        <img
          src="https://res.cloudinary.com/dnyqwoeyh/image/upload/v1751353460/logo_rsvmqr.jpg"
          alt="Logo"
          class="w-16 h-16 mx-auto mb-4 rounded-full border-2 border-[#23262F]"
        />
        <h3 class="text-2xl font-bold mb-2" style="color: #45b4ff">
          Application Submitted!
        </h3>
        <p class="mb-4 text-[#45B4FF]">
          Thank you for your interest in joining the SRM Insider Community!<br />
          We will review your application and contact you soon.
        </p>
        <button
          id="close-modal"
          class="mt-2 bg-[#45B4FF] hover:bg-[#1e90ff] text-black font-bold py-2 px-6 rounded-xl shadow transition"
        >
          Close
        </button>
      </div>
    </div>

    <form
      id="enquiry-form"
      class="bg-[#181A20] shadow-2xl rounded-2xl px-8 pt-8 pb-8 mb-4 w-full max-w-2xl space-y-6 border border-[#23262F] max-h-[90vh] overflow-y-auto"
    >
      <div class="flex flex-col items-center mb-6">
        <img
          src="https://res.cloudinary.com/dnyqwoeyh/image/upload/v1751353460/logo_rsvmqr.jpg"
          alt="SRM Insider Logo"
          class="w-20 h-20 rounded-full shadow-lg mb-3 border-4 border-[#23262F]"
        />
        <h2 class="text-3xl font-extrabold text-center" style="color: #45b4ff">
          Application
        </h2>
        <p
          class="text-center text-base mt-1"
          style="color: #45b4ff; opacity: 0.8"
        >
          Join the SRM Insider Community
        </p>
      </div>

      <div class="space-y-4">
        <h3 class="text-xl font-bold" style="color: #45b4ff">Personal Information</h3>
        
        <input
          type="text"
          name="name"
          placeholder="Full Name *"
          required
          class="w-full p-3 bg-[#23262F] border border-[#353945] rounded-xl text-[#45B4FF] placeholder-[#45B4FF] focus:outline-none focus:ring-2 focus:ring-[#45B4FF] focus:bg-[#23262F] transition shadow-sm"
        />
        
        <input
          type="email"
          name="srm_email"
          placeholder="SRM Email ID (@srmist.edu.in) *"
          pattern="[a-z0-9._%+-]+@srmist\.edu\.in$"
          required
          class="w-full p-3 bg-[#23262F] border border-[#353945] rounded-xl text-[#45B4FF] placeholder-[#45B4FF] focus:outline-none focus:ring-2 focus:ring-[#45B4FF] focus:bg-[#23262F] transition shadow-sm"
        />
        
        <input
          type="email"
          name="personal_email"
          placeholder="Personal Email ID *"
          required
          class="w-full p-3 bg-[#23262F] border border-[#353945] rounded-xl text-[#45B4FF] placeholder-[#45B4FF] focus:outline-none focus:ring-2 focus:ring-[#45B4FF] focus:bg-[#23262F] transition shadow-sm"
        />
        
        <input
          type="tel"
          name="mobile"
          placeholder="Mobile Number *"
          pattern="[0-9]{10}"
          required
          class="w-full p-3 bg-[#23262F] border border-[#353945] rounded-xl text-[#45B4FF] placeholder-[#45B4FF] focus:outline-none focus:ring-2 focus:ring-[#45B4FF] focus:bg-[#23262F] transition shadow-sm"
        />
        
        <input
          type="text"
          name="registration_number"
          placeholder="SRM Registration Number *"
          required
          class="w-full p-3 bg-[#23262F] border border-[#353945] rounded-xl text-[#45B4FF] placeholder-[#45B4FF] focus:outline-none focus:ring-2 focus:ring-[#45B4FF] focus:bg-[#23262F] transition shadow-sm"
        />
        <label class="block text-[#45B4FF] font-medium mt-2 mb-1">Select Your Domain: <span class="text-red-500">*</span></label>
        <div class="relative">
          <select
            name="domain"
            required
            class="w-full appearance-none p-3 pr-10 bg-[#23262F] border border-[#353945] rounded-xl text-[#45B4FF] focus:outline-none focus:ring-2 focus:ring-[#45B4FF] focus:border-[#45B4FF] focus:bg-[#23262F] transition shadow-sm hover:border-[#45B4FF] cursor-pointer"
          >
            <option value="" disabled selected>Select your domain</option>
            <option value="CSE">backend</option>
            <option value="IT">frontend</option>
            <option value="Other">Other</option>
          </select>
          <span class="pointer-events-none absolute inset-y-0 right-3 flex items-center">
            <svg class="w-5 h-5 text-[#45B4FF]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </span>
        </div>
      </div>

      <div class="space-y-4">
        <h3 class="text-xl font-bold" style="color: #45b4ff">Social Media Profiles</h3>
        
        <input
          type="url"
          name="github"
          placeholder="GitHub Profile URL *"
          required
          class="w-full p-3 bg-[#23262F] border border-[#353945] rounded-xl text-[#45B4FF] placeholder-[#45B4FF] focus:outline-none focus:ring-2 focus:ring-[#45B4FF] focus:bg-[#23262F] transition shadow-sm"
        />
        
        <input
          type="url"
          name="linkedin"
          placeholder="LinkedIn Profile URL *"
          required
          class="w-full p-3 bg-[#23262F] border border-[#353945] rounded-xl text-[#45B4FF] placeholder-[#45B4FF] focus:outline-none focus:ring-2 focus:ring-[#45B4FF] focus:bg-[#23262F] transition shadow-sm"
        />
        <div>
          <label class="block text-[#45B4FF] font-medium mb-1">Upload Resume</label>
          <input
            type="file"
            name="resume"
            accept="application/pdf"
            id="resumeInput"
            class="w-full p-3 bg-[#23262F] border border-[#353945] rounded-xl text-[#45B4FF] file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-semibold file:bg-[#45B4FF] file:text-black hover:file:bg-[#1e90ff] transition shadow-sm"
          />
          <p class="text-xs text-[#45B4FF] mt-1">Max file size: 2MB. Only PDF files are allowed.</p>
          <a id="resumeViewLink" href="#" target="_blank" class="hidden text-[#45B4FF] underline text-sm mt-2 inline-block">View uploaded resume</a>
        </div>
      </div>

      <div class="space-y-4">
        <h3 class="text-xl font-bold" style="color: #45b4ff">Experience</h3>
        
        <textarea
          name="standout"
          placeholder="What makes you stand out from other candidates? *"
          required
          rows="4"
          class="w-full p-3 bg-[#23262F] border border-[#353945] rounded-xl text-[#45B4FF] placeholder-[#45B4FF] focus:outline-none focus:ring-2 focus:ring-[#45B4FF] focus:bg-[#23262F] transition shadow-sm resize-none"
        ></textarea>
        
        <textarea
          name="projects"
          placeholder="If you have worked on any projects, please describe them here (include technologies used, your role, and outcomes)"
          rows="4"
          class="w-full p-3 bg-[#23262F] border border-[#353945] rounded-xl text-[#45B4FF] placeholder-[#45B4FF] focus:outline-none focus:ring-2 focus:ring-[#45B4FF] focus:bg-[#23262F] transition shadow-sm resize-none"
        ></textarea>
        
        <textarea
          name="achievements"
          placeholder="If you have any achievements, certifications, hackathons, or any relevant experience, please list them out here"
          rows="4"
          class="w-full p-3 bg-[#23262F] border border-[#353945] rounded-xl text-[#45B4FF] placeholder-[#45B4FF] focus:outline-none focus:ring-2 focus:ring-[#45B4FF] focus:bg-[#23262F] transition shadow-sm resize-none"
        ></textarea>
      </div>

      <button
        type="submit"
        class="bg-[#45B4FF] hover:bg-[#1e90ff] text-black font-bold py-3 px-4 rounded-xl w-full mt-4 shadow-lg transition transform hover:scale-[1.03] active:scale-95"
      >
        Submit Application
      </button>

      <p
        id="form-message"
        class="text-center text-sm mt-2"
        style="color: #45b4ff"
      ></p>
    </form>

    <script>
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyr2Uwhsh_JWoZ8kLwYs1NGkpF2nE5DXDrDVu2tTDz6clwfdH4DG6GrL8Yf79nk3wlZ/exec";
  
  const resumeInput = document.getElementById('resumeInput');
  const resumeViewLink = document.getElementById('resumeViewLink');
  
  resumeInput.addEventListener('change', function() {
    if (resumeInput.files && resumeInput.files.length > 0) {
      const file = resumeInput.files[0];
      if (file.type === 'application/pdf' && file.size <= 2 * 1024 * 1024) {
        const fileURL = URL.createObjectURL(file);
        resumeViewLink.href = fileURL;
        resumeViewLink.classList.remove('hidden');
        resumeViewLink.textContent = 'View uploaded resume';
      } else {
        resumeViewLink.href = '#';
        resumeViewLink.classList.add('hidden');
      }
    } else {
      resumeViewLink.href = '#';
      resumeViewLink.classList.add('hidden');
    }
  });

  const form = document.getElementById('enquiry-form');
  form.addEventListener('submit', function(e) {
    e.preventDefault();

    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());
    const resumeFile = resumeInput.files[0];
    
    // File validation
    if (resumeFile) {
        if (resumeFile.type !== 'application/pdf') {
          alert('Only PDF files are allowed for resume upload.');
          return;
        }
        if (resumeFile.size > 2 * 1024 * 1024) {
          alert('Resume file size should not exceed 2MB.');
          return;
        }
    }

    document.getElementById("loader-overlay").classList.remove("hidden");

    // Handle file reading if a file is present
    if (resumeFile) {
      const reader = new FileReader();
      reader.onloadend = function() {
        data.resumeFile = reader.result; // Base64 encoded file
        data.resumeFileName = resumeFile.name;
        data.resumeMimeType = resumeFile.type;
        sendData(data);
      };
      reader.readAsDataURL(resumeFile);
    } else {
      sendData(data); // Send data without a file
    }
  });

  function sendData(data) {
    fetch(SCRIPT_URL, {
        method: 'POST',
        body: JSON.stringify(data),
      })
      .then(res => res.json())
      .then(response => {
        document.getElementById("loader-overlay").classList.add("hidden");
        if (response.result === "success") {
          form.reset();
          document.getElementById("success-modal").classList.remove("hidden");
          document.getElementById("form-message").textContent = "";
          resumeViewLink.href = '#';
          resumeViewLink.classList.add('hidden');
        } else {
          throw new Error(response.message || "Unknown error");
        }
      })
      .catch(error => {
        document.getElementById("loader-overlay").classList.add("hidden");
        document.getElementById("form-message").textContent =
          "Something went wrong. Please try again. Error: " + error.message;
      });
  }

  document.getElementById("close-modal").onclick = function() {
    document.getElementById("success-modal").classList.add("hidden");
  };

  document.querySelector('input[name="srm_email"]').addEventListener('blur', function() {
    const email = this.value;
    if (email && !email.endsWith('@srmist.edu.in')) {
      this.setCustomValidity('Please enter a valid SRM email address (@srmist.edu.in)');
    } else {
      this.setCustomValidity('');
    }
  });
</script>
  </body>
</html>